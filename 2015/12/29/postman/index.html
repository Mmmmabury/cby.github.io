<!doctype html>



  


<html class="theme-next pisces use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  
    
      
    

    
  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic|monaco:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.0.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Web,HTTP,开发利器," />





  <link rel="alternate" href="/atom.xml" title="cby的博客" type="application/atom+xml" />




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.0.1" />






<meta name="description" content="With Postman, you can construct simple as well as complex requests quickly, save them for later use and analyze the responses sent by the API. Postman can dramatically cut down the time required to t">
<meta property="og:type" content="article">
<meta property="og:title" content="Postman 简述">
<meta property="og:url" content="http://yuntechs.me/2015/12/29/postman/index.html">
<meta property="og:site_name" content="cby的博客">
<meta property="og:description" content="With Postman, you can construct simple as well as complex requests quickly, save them for later use and analyze the responses sent by the API. Postman can dramatically cut down the time required to t">
<meta property="og:image" content="http://yuntechs.me/picture/主界面.png">
<meta property="og:image" content="http://yuntechs.me/picture/请求构造器.png">
<meta property="og:image" content="http://yuntechs.me/picture/简单请求.png">
<meta property="og:image" content="http://yuntechs.me/picture/获得 headers.png">
<meta property="og:image" content="http://yuntechs.me/picture/post.png">
<meta property="og:image" content="http://yuntechs.me/picture/environment.png">
<meta property="og:image" content="http://yuntechs.me/picture/environment-age.png">
<meta property="og:image" content="http://yuntechs.me/picture/environment-variable.png">
<meta property="og:image" content="http://yuntechs.me/picture/environment-age.png">
<meta property="og:image" content="http://yuntechs.me/picture/TestsJSON.png">
<meta property="og:image" content="http://yuntechs.me/picture/TestsResult.png">
<meta property="og:image" content="http://yuntechs.me/picture/变量的值.png">
<meta property="og:image" content="http://yuntechs.me/picture/PRS.png">
<meta property="og:image" content="http://yuntechs.me/picture/脚本流程图.png">
<meta property="og:image" content="http://yuntechs.me/picture/run collection.png">
<meta property="og:image" content="http://yuntechs.me/picture/collectionResult.png">
<meta property="og:updated_time" content="2016-04-22T13:48:15.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Postman 简述">
<meta name="twitter:description" content="With Postman, you can construct simple as well as complex requests quickly, save them for later use and analyze the responses sent by the API. Postman can dramatically cut down the time required to t">
<meta name="twitter:image" content="http://yuntechs.me/picture/主界面.png">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"hide"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 0,
      author: '博主'
    }
  };
</script>

  <title> Postman 简述 | cby的博客 </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  


<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-71859683-1', 'auto');
  ga('send', 'pageview');
</script>









  
  
    
  

  <div class="container one-collumn sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">cby的博客</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">勿在浮沙筑高台</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      

      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                Postman 简述
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2015-12-29T22:37:58+08:00" content="2015-12-29">
              2015-12-29
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Web开发/" itemprop="url" rel="index">
                    <span itemprop="name">Web开发</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/12/29/postman/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2015/12/29/postman/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        <blockquote>
<p>With Postman, you can construct simple as well as complex requests quickly, save them for later use and analyze the responses sent by the API. Postman can dramatically cut down the time required to test and develop APIs.</p>
</blockquote>
<p>Postman 是一个 Chrome App，可以在 Chrome store上<a href="https://chrome.google.com/webstore/detail/postman-rest-client-packa/fhbjgbiflinjbdggehcddcbncdddomop?hl=en" target="_blank" rel="external">免费获得</a>。Postman 能快速构建简单或者复杂的 HTTP 请求，并且对服务器回复的 HTTP 内容进行分析，以此来测试 API。<br><a id="more"></a></p>
<h1 id="Postman界面"><a href="#Postman界面" class="headerlink" title="Postman界面"></a>Postman界面</h1><h2 id="主界面"><a href="#主界面" class="headerlink" title="主界面"></a>主界面</h2><p><img src="/picture/主界面.png" alt="主界面"></p>
<p>Postman的主界面分两大块，左侧是侧边栏（Sidebar），右侧为请求构造器（Request builder）。<br>侧边栏存储历史记录，以及记录的数据，可以点击左下角将侧边栏隐藏。 </p>
<h2 id="请求构造器"><a href="#请求构造器" class="headerlink" title="请求构造器"></a>请求构造器</h2><p><img src="/picture/请求构造器.png" alt="请求构造器"><br>请求构造器能构造出一个 HTTP 请求(废话),除了这个功能外,它还自带了脚本功能来节省构造的时间，以及一个测试功能,来帮助识别API 服务器回复的消息是否是我们需要的。</p>
<ul>
<li>编号1:可以选择HTTP请求类型，有15种请求方法可以选择。<a href="http://tools.jb51.net/table/http_request_method" target="_blank" rel="external">HTTP请求方法详解</a></li>
<li>编号2:点击可以以键值对的方式添加URL参数。</li>
<li>编号3: 从左到右依次为：身份验证、Header 字段、HTTP Body、Postman 脚本、测试脚本。需要注意的是因为谷歌浏览器以及 XMLHttpRequest 的限制，有一些 Header 是被限制的，<a href="http://www.getpostman.com/docs/requests#headers" target="_blank" rel="external">被限制 Header 的详细表单在这。</a> 这里有两个脚本，他们的区别是 Pre-request Scripts 在请求发送之前运行，而 Tests Scripts 会在接受到服务器回复后运行，他们的使用会在后文涉及。</li>
</ul>
<h1 id="构建请求"><a href="#构建请求" class="headerlink" title="构建请求"></a>构建请求</h1><h2 id="GET-请求"><a href="#GET-请求" class="headerlink" title="GET 请求"></a>GET 请求</h2><p>其他的不多说直接撸出一个请求来试试。比如我需要向服务器请求成绩排在最前面的3个同学，可以这样构建：</p>
<p><img src="/picture/简单请求.png" alt="简单请求"><br>构建好 URL 后只要按 Send 便可以从服务器获得数据。数据的显示方式有3种：Pretty、Raw、Preview，可以理解为语法高亮格式、普通文本格式、预览。<br>更复杂的请求只不过在这个简单请求上添加东西，比如添加 Headers，更多的参数，添加身份验证等等。<br>也可以添加一个自定义 Header，服务器返回 HTTP 请求中的所有 Header 字段：</p>
<p><img src="/picture/获得 headers.png" alt="获得 Headers"></p>
<h2 id="POST"><a href="#POST" class="headerlink" title="POST"></a>POST</h2><p>构建一个 POST 请求，服务器返回所提交的 form-data。</p>
<p><img src="/picture/post.png" alt="POST 请求"></p>
<h1 id="Environment"><a href="#Environment" class="headerlink" title="Environment"></a>Environment</h1><p>Environment 是 Postman 中很方便的功能，使用 Environment 能使我们快速地在不同环境中切换。<br>在右上角点击 environment，点击 manage environments，在点击 Add 手动添加 Environment，或者选择 import 从文件中导入变量。在管理器中也可以添加全局变量。<br><img src="/picture/environment.png" alt="environment"></p>
<h2 id="自定义变量"><a href="#自定义变量" class="headerlink" title="自定义变量"></a>自定义变量</h2><p>自定义变量只能在本 environment 中使用，在点击 Add 后回出现对话框，输入键值对便可以添加环境变量，(点击右边的编辑图标可以批量添加）使用环境变量只要在 URL 中添加标识符，例如：我现在需要请求学生的年龄，我可以设置环境：</p>
<p><img src="/picture/environment-age.png" alt="environment-age"><br>然后在 URL 中添加<code>{ { } }</code>标识符：<br><img src="/picture/environment-variable.png" alt="environment-variable"><br>点击发送就可以在服务器端看到下图：<br><img src="/picture/environment-age.png" alt="environment-server"><br>可以看到 GET 请求的参数已经改变了。在使用的时候，如果忘记变量的值，也可以点击右上的 X 图标，会显示当前环境下的键值对。</p>
<h2 id="全局变量"><a href="#全局变量" class="headerlink" title="全局变量"></a>全局变量</h2><p>全局变量就是无论在哪个 environment 中都可以使用的变量。另外，这里介绍两个官方提供的动态变量：</p>
<ul>
<li>{ {$timestamp} }: Adds the current timestamp.添加unix时间戳</li>
<li>{ {$randomInt} }: Adds a random integer between 0 and 1000. 添加随机数</li>
</ul>
<p>动态变量只能在请求页面使用，不能在 run collections 使用。</p>
<h1 id="Pre-Request-Scripts-和-Tests-Scripts"><a href="#Pre-Request-Scripts-和-Tests-Scripts" class="headerlink" title="Pre Request Scripts 和 Tests Scripts"></a>Pre Request Scripts 和 Tests Scripts</h1><p>Pre Request Scripts 和 Tests Scripts 是 Postman 中的 javascript 脚本，它运行在 Postman Sandbox 中，除了<a href="http://www.getpostman.com/docs/sandbox" target="_blank" rel="external">官方所带的脚本模板、变量和方法</a>外，它可以使用很多 javascript 的库，比如 lodash。</p>
<h2 id="Pre-Request-Scripts"><a href="#Pre-Request-Scripts" class="headerlink" title="Pre Request Scripts"></a>Pre Request Scripts</h2><p>这个脚本将在请求之前运行。官方有4个模板：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">postman.clearGlobalVariable(<span class="string">"variable_key"</span>);<span class="comment">//清除一个全局变量</span></div><div class="line">postman.clearEnvironmentVariable(<span class="string">"variable_key"</span>);<span class="comment">//清除一个环境变量</span></div><div class="line">postman.setGlobalVariable(<span class="string">"variable_key"</span>, <span class="string">"variable_value"</span>);<span class="comment">//设置一个全局变量</span></div><div class="line">postman.setEnvironmentVariable(<span class="string">"variable_key"</span>, <span class="string">"variable_value"</span>);<span class="comment">//设置一个环境变量</span></div></pre></td></tr></table></figure>
<p>这个脚本将改变在 environment 中设置的变量值。</p>
<h2 id="Tests-Scripts"><a href="#Tests-Scripts" class="headerlink" title="Tests Scripts"></a>Tests Scripts</h2><p>Tests Scripts 顾名思义，是用来测试所得response 的。Tests Scripts 脚本大概可以分为2类，一类操作变量，一类分析 response，返回分析结果。</p>
<h3 id="操作变量"><a href="#操作变量" class="headerlink" title="操作变量"></a>操作变量</h3><p>设置方法与 Pre Request Scripts 一样，但因为 tests scripts 是在接收到 response 后才运行的，所以对变量做出的操作在下一个 request 才被应用。所以一般用于改变环境变量值，比如可以用 if 进行判断：<br><figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span>(environment[<span class="string">"Key"</span>] == <span class="string">"value"</span>)</div><div class="line">&#123;</div><div class="line">  postman.setEnvironmentVariable(<span class="string">"Key"</span>, <span class="string">"value1"</span>);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h3 id="分析-response-以及-JSON-Scheme"><a href="#分析-response-以及-JSON-Scheme" class="headerlink" title="分析 response 以及 JSON Scheme"></a>分析 response 以及 JSON Scheme</h3><p>分析 response 有很多功能，比如分析返回的文本，或者分析返回的状态码。Tests 会根据脚本返回 true 或者 false 来判断是否通过测试。具体有：</p>
<ol>
<li>body 是否包含需要的字符串  </li>
<li>将 body 的 XML 格式转到 JSON 对象  </li>
<li>body 是否与输入的字符串一样</li>
<li>检查 JSON 值  </li>
<li>检查 Status code</li>
<li>TinyValidator 分析 JSON</li>
<li>等等……</li>
</ol>
<p>所有模板的例子在<a href="http://www.getpostman.com/docs/testing_examples" target="_blank" rel="external">这里</a>。<br>因为当时看的时候不是很明白TinyValidator，所以重点要说下用 TinyValidator 分析 JSON。<br>JSON scheme定义了一种同时易于人类以及电脑阅读的 JSON 格式，它是一种既定的规范，具体的可以看下<a href="http://json-schema.org/latest/json-schema-core.html" target="_blank" rel="external">JSON Schema</a>其中由介绍可以使用的关键字。<a href="https://github.com/geraintluff/tv4" target="_blank" rel="external">TinyValidator</a> 是 JSON Scheme 库，可以分析一个输入的 JSON 数据，判断它是否符合提供的 JSON 模板。<br>例如:<br>输入：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">[</div><div class="line">&#123;<span class="attr">"name"</span>:<span class="string">"cby"</span>,<span class="attr">"grade"</span>:<span class="string">"98"</span> &#125;,</div><div class="line">&#123;<span class="attr">"name"</span>:<span class="string">"jzb"</span>,<span class="attr">"grade"</span>:<span class="string">"88"</span> &#125;,</div><div class="line">&#123;<span class="attr">"name"</span>:<span class="string">"hym"</span>,<span class="attr">"grade"</span>:<span class="string">"78"</span> &#125;</div><div class="line">]</div></pre></td></tr></table></figure>
<p>它对应的 scheme 可以写为：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">    "title": "student",</div><div class="line">    "type": "array",                     #JSON格式，是数组</div><div class="line">    "items":&#123;                            #数组包含的子项</div><div class="line">    "type":"object",                #类型对象</div><div class="line">    "properties": &#123;                 #对象属性</div><div class="line">	   "name":&#123;"type":"string"&#125;,    #"key":&#123;"type":"value类型"&#125;</div><div class="line">	   "grade":&#123;"type":"string"&#125;,</div><div class="line">	    &#125;,</div><div class="line">    "required":["name","grade"]  #必须的对象属性</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>在 Tests Scripts 中就可以写为：<br><img src="/picture/TestsJSON.png" alt="TestsJSON"><br>注意要把 responseBody JSON 化后再进行分析。分析结果：</p>
<p><img src="/picture/TestsResult.png" alt="TestsRsult"></p>
<h3 id="变量的值"><a href="#变量的值" class="headerlink" title="变量的值"></a>变量的值</h3><p>写了一些环境变量和脚本后，我对重复设置的变量值产生了疑惑，在自定义环境变量、Pre Request Scripts 和 Tests Scripts 中，设置的变量值到底会显示哪个呢？按照过程应该是显示 Pre Request Scripts 的值。<br>我设置了一个自定义变量 <code>priority</code> ，在自定义的环境变量中设置 <code>priority=environment</code> ，在 PRScripts 中设置 <code>postman.setEnvironmentVariable(&quot;priority&quot;, &quot;PRScripts&quot;);</code> ，在 Tests 中设置 <code>postman.setEnvironmentVariable(&quot;priority&quot;, &quot;Tests&quot;);</code> ，URL 如下图：</p>
<p><img src="/picture/变量的值.png" alt="变量的值"><br>最后服务器端接受的结果果然是 PRScripts。<br><img src="/picture/PRS.png" alt="PRScripts"></p>
<h2 id="脚本总结"><a href="#脚本总结" class="headerlink" title="脚本总结"></a>脚本总结</h2><p>Postman 流程图</p>
<p><img src="/picture/脚本流程图.png" alt="脚本流程图">要注意不同脚本之间对变量值的覆盖。</p>
<h1 id="Run-Collections"><a href="#Run-Collections" class="headerlink" title="Run Collections"></a>Run Collections</h1><p>对之前保存的操作，进行自动化测试。<br>只要将之前的 request 保存到一个 collection 中，然后在 runner collections 中执行。</p>
<p><img src="/picture/run collection.png" alt="Run Collections"><br>这里选择了之前保存的 hh，环境选择 age，请求次数为10次，按开始：</p>
<p><img src="/picture/collectionResult.png" alt="CollectionResult"><br>可以看到第二个 URL 中 failed 是10次，说明运行了10次。</p>
<h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>测试工具，上手简单易用，除了脚本需要付出一点学习成本外，其实挺简单。感谢 Postman 团队提供这么好的工具，更加详细的可以看 Postman 的<a href="http://www.getpostman.com/docs/" target="_blank" rel="external">官方文档</a>。<br>最后附上 Python 服务端代码。<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># encoding=utf-8</span></div><div class="line"><span class="keyword">import</span> json</div><div class="line"><span class="keyword">import</span> SocketServer</div><div class="line"><span class="keyword">import</span> BaseHTTPServer</div><div class="line"><span class="keyword">import</span> re</div><div class="line">PORT = <span class="number">8000</span></div><div class="line">FILEPATH = <span class="string">"grade.json"</span></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">TestHttpServer</span><span class="params">(BaseHTTPServer.BaseHTTPRequestHandler)</span>:</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">do_GET</span><span class="params">(self)</span>:</span></div><div class="line">        <span class="keyword">print</span> self.path</div><div class="line">        <span class="keyword">if</span> self.path.split(<span class="string">'?'</span>)[<span class="number">0</span>] == <span class="string">'/grades'</span>:</div><div class="line">            <span class="keyword">with</span> open(FILEPATH, <span class="string">'r'</span>) <span class="keyword">as</span> f:</div><div class="line">                buf = f.read()</div><div class="line">            self.protocal_version = <span class="string">"HTTP/1.1"</span></div><div class="line">            self.send_response(<span class="number">200</span>)</div><div class="line">            self.end_headers()</div><div class="line">            self.wfile.write(buf)</div><div class="line">        <span class="keyword">elif</span> self.path.split(<span class="string">'?'</span>)[<span class="number">0</span>] == <span class="string">'/getheaders'</span>:</div><div class="line">            self.protocal_version = <span class="string">"HTTP/1.1"</span></div><div class="line">            self.send_response(<span class="number">200</span>)</div><div class="line">            self.end_headers()</div><div class="line">            self.getHeaders()</div><div class="line">        <span class="keyword">else</span>:</div><div class="line">            self.pageNotFind()</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">do_POST</span><span class="params">(self)</span>:</span></div><div class="line">        <span class="keyword">if</span> self.path.split(<span class="string">'?'</span>)[<span class="number">0</span>] != <span class="string">'/information'</span>:</div><div class="line">            self.pageNotFind()</div><div class="line">            <span class="keyword">return</span></div><div class="line">        buf = <span class="string">"user.id = cby"</span></div><div class="line">        self.protocal_version = <span class="string">"HTTP/1.1"</span></div><div class="line">        self.send_response(<span class="number">200</span>)</div><div class="line">        self.end_headers()</div><div class="line">        self.getHeaders()</div><div class="line">        self.analyseData()</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">analyseData</span><span class="params">(self)</span>:</span></div><div class="line">        data = self.rfile.read(int(self.headers[<span class="string">'Content-Length'</span>]))</div><div class="line">        kvDict = &#123;&#125;</div><div class="line">        valueList = []</div><div class="line">        keys = re.findall(<span class="string">'name=".*"'</span>, data)</div><div class="line">        data = data.split(<span class="string">'\r\n'</span>)</div><div class="line">        i = <span class="number">1</span></div><div class="line">        <span class="keyword">for</span> v <span class="keyword">in</span> data:</div><div class="line">            <span class="keyword">if</span> i % <span class="number">4</span> == <span class="number">0</span>:</div><div class="line">                valueList.append(v)</div><div class="line">            i+=<span class="number">1</span></div><div class="line">        i = <span class="number">0</span></div><div class="line">        <span class="keyword">for</span> k <span class="keyword">in</span> keys:</div><div class="line">            k = k.split(<span class="string">'='</span>)[<span class="number">1</span>].strip(<span class="string">'"'</span>)</div><div class="line">            kvDict[k] = valueList[i]</div><div class="line">            i += <span class="number">1</span></div><div class="line">        encodedjson = json.dumps(kvDict)</div><div class="line">        <span class="keyword">with</span> open(<span class="string">'user.json'</span>,<span class="string">'w'</span>) <span class="keyword">as</span> f:</div><div class="line">            f.write(encodedjson)</div><div class="line">        self.wfile.write(encodedjson)</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">getHeaders</span><span class="params">(self)</span>:</span></div><div class="line">        headersList = []</div><div class="line">        <span class="keyword">for</span> h <span class="keyword">in</span> self.headers:</div><div class="line">            headersList.append(&#123;h:self.headers[h]&#125;)</div><div class="line">        encodedjson = json.dumps(headersList)</div><div class="line">        <span class="keyword">with</span> open(<span class="string">'header.json'</span>,<span class="string">'w'</span>) <span class="keyword">as</span> f:</div><div class="line">            f.write(encodedjson)</div><div class="line">        self.wfile.write(encodedjson)</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">pageNotFind</span><span class="params">(self)</span>:</span></div><div class="line">        self.protocal_version = <span class="string">"HTTP/1.1"</span></div><div class="line">        self.send_response(<span class="number">200</span>)</div><div class="line">        self.end_headers()</div><div class="line">        self.wfile.write(<span class="string">'404 PageNotFind'</span>)</div><div class="line"></div><div class="line">Handler = TestHttpServer</div><div class="line">httpd = SocketServer.TCPServer((<span class="string">""</span>, PORT), Handler)</div><div class="line"><span class="keyword">print</span> <span class="string">"serving at port"</span>, PORT</div><div class="line">httpd.serve_forever()</div></pre></td></tr></table></figure></p>

      
    </div>

    <div>
      
        
      
    </div>

    <div>
      
        

      
    </div>

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/Web/" rel="tag">#Web</a>
          
            <a href="/tags/HTTP/" rel="tag">#HTTP</a>
          
            <a href="/tags/开发利器/" rel="tag">#开发利器</a>
          
        </div>
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2014/09/14/图解-TCP-IP/" rel="next" title="图解 TCP/IP 笔记">
                <i class="fa fa-chevron-left"></i> 图解 TCP/IP 笔记
              </a>
            
          </div>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2015/12/30/HTTP-协议/" rel="prev" title="HTTP 协议基础介绍">
                HTTP 协议基础介绍 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
      <div class="ds-thread" data-thread-key="2015/12/29/postman/"
           data-title="Postman 简述" data-url="http://yuntechs.me/2015/12/29/postman/">
      </div>
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/picture/avatar.jpeg"
               alt="Baiyun Cai" />
          <p class="site-author-name" itemprop="name">Baiyun Cai</p>
          <p class="site-description motion-element" itemprop="description">白云的个人博客</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">44</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              <a href="/categories">
                <span class="site-state-item-count">14</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">28</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        
          <div class="feed-link motion-element">
            <a href="/atom.xml" rel="alternate">
              <i class="fa fa-rss"></i>
              RSS
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://wiki.yuntechs.me" target="_blank" title="个人维基">
                  
                    <i class="fa fa-fw fa-wikipedia-w"></i>
                  
                  个人维基
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://github.com/Mmmmabury" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                  GitHub
                </a>
              </span>
            
          
        </div>

        
        

        
        

      </section>

      
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">
            
              
            
            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Postman界面"><span class="nav-number">1.</span> <span class="nav-text">Postman界面</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#主界面"><span class="nav-number">1.1.</span> <span class="nav-text">主界面</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#请求构造器"><span class="nav-number">1.2.</span> <span class="nav-text">请求构造器</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#构建请求"><span class="nav-number">2.</span> <span class="nav-text">构建请求</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#GET-请求"><span class="nav-number">2.1.</span> <span class="nav-text">GET 请求</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#POST"><span class="nav-number">2.2.</span> <span class="nav-text">POST</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Environment"><span class="nav-number">3.</span> <span class="nav-text">Environment</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#自定义变量"><span class="nav-number">3.1.</span> <span class="nav-text">自定义变量</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#全局变量"><span class="nav-number">3.2.</span> <span class="nav-text">全局变量</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Pre-Request-Scripts-和-Tests-Scripts"><span class="nav-number">4.</span> <span class="nav-text">Pre Request Scripts 和 Tests Scripts</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Pre-Request-Scripts"><span class="nav-number">4.1.</span> <span class="nav-text">Pre Request Scripts</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Tests-Scripts"><span class="nav-number">4.2.</span> <span class="nav-text">Tests Scripts</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#操作变量"><span class="nav-number">4.2.1.</span> <span class="nav-text">操作变量</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#分析-response-以及-JSON-Scheme"><span class="nav-number">4.2.2.</span> <span class="nav-text">分析 response 以及 JSON Scheme</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#变量的值"><span class="nav-number">4.2.3.</span> <span class="nav-text">变量的值</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#脚本总结"><span class="nav-number">4.3.</span> <span class="nav-text">脚本总结</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Run-Collections"><span class="nav-number">5.</span> <span class="nav-text">Run Collections</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#总结"><span class="nav-number">6.</span> <span class="nav-text">总结</span></a></li></ol></div>
            
          </div>
        </section>
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy;  2015 - 
  <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Baiyun Cai</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="http://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Pisces
  </a>
</div>

        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.0.1"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.0.1"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.0.1"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.0.1"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.1"></script>



  

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"yuntechs"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.id = 'duoshuo-script';
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>

  
    
  





  
  
  
  <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    });
  </script>

  <script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
      var all = MathJax.Hub.getAllJax(), i;
      for (i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';
      }
    });
  </script>
  <script type="text/javascript" src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>


  

  

</body>
</html>
